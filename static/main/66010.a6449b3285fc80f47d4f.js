(self.webpackChunktradingview=self.webpackChunktradingview||[]).push([[66010,80717],{78217:e=>{e.exports={pair:"pair-ocURKVwI",xxceptionallysmalldonotusebrv1023:"xxceptionallysmalldonotusebrv1023-ocURKVwI",xxxxsmall:"xxxxsmall-ocURKVwI",xxxsmall:"xxxsmall-ocURKVwI",xxsmall:"xxsmall-ocURKVwI",xsmall:"xsmall-ocURKVwI",small:"small-ocURKVwI",medium:"medium-ocURKVwI",large:"large-ocURKVwI",xlarge:"xlarge-ocURKVwI",xxlarge:"xxlarge-ocURKVwI",xxxlarge:"xxxlarge-ocURKVwI",logo:"logo-ocURKVwI",skeleton:"skeleton-ocURKVwI",empty:"empty-ocURKVwI"}},456057:e=>{e.exports={logo:"logo-PsAlMQQF",hidden:"hidden-PsAlMQQF",xxceptionallysmalldonotusebrv1023:"xxceptionallysmalldonotusebrv1023-PsAlMQQF",xxxsmall:"xxxsmall-PsAlMQQF",xxsmall:"xxsmall-PsAlMQQF",xsmall:"xsmall-PsAlMQQF",small:"small-PsAlMQQF",medium:"medium-PsAlMQQF",large:"large-PsAlMQQF",xlarge:"xlarge-PsAlMQQF",xxlarge:"xxlarge-PsAlMQQF",xxxlarge:"xxxlarge-PsAlMQQF",skeleton:"skeleton-PsAlMQQF",letter:"letter-PsAlMQQF"}},715216:e=>{e.exports={"tv-spinner__container-rotate":"tv-spinner__container-rotate-aLqboHuu"}},72224:e=>{e.exports={fade:"fade-zUA5953i",hidden:"hidden-zUA5953i"}},467236:(e,t,i)=>{"use strict";i.d(t,{getCircleLogoAnyHtml:()=>n});var s=i(857430),a=i(348091);function n(e){const{logoUrls:t,...i}=e;return 1===t.length?(0,s.getCircleLogoHtml)({logoUrl:t[0],...i}):2===t.length?(0,a.getCircleLogoPairHtml)({primaryLogoUrl:t[0],secondaryLogoUrl:t[1],...i}):(0,s.getCircleLogoHtml)({logoUrl:void 0,...i})}},348091:(e,t,i)=>{"use strict";i.d(t,{getCircleLogoPairHtml:()=>a});var s=i(115078);function a(e){const{primaryLogoUrl:t,secondaryLogoUrl:i,size:a,className:r}=e;return`<span class="${(0,s.getBlockStyleClasses)(a,r)}">\n\t\t\t${n({logoUrl:i,size:a})}\n\t\t\t${n({logoUrl:t,size:a})}\n\t\t</span>`}function n(e){const{logoUrl:t,size:i}=e,a=(0,s.getLogoStyleClasses)(i,2,Boolean(t));return void 0===t?`<span class="${a}"></span>`:`<img class="${a}" crossorigin src="${t}" alt="" />`}},115078:(e,t,i)=>{"use strict";i.d(t,{getBlockStyleClasses:()=>o,getLogoStyleClasses:()=>l});var s=i(497754),a=i(548729),n=i(78217),r=i.n(n);function o(e,t){return s(r().pair,r()[e],t)}function l(e,t=2,i=!0){return s(r().logo,r()[e],r().skeleton,a.skeletonTheme.wrapper,!i&&r().empty,1===t&&s(a.skeletonTheme.animated))}},857430:(e,t,i)=>{"use strict";i.d(t,{getCircleLogoHtml:()=>a});var s=i(842060);i(456057);function a(e){const t=(0,s.getStyleClasses)(e.size,2,e.className);return(0,s.isCircleLogoWithUrlProps)(e)?`<img class="${t}" crossorigin src="${e.logoUrl}" alt="">`:`<span class="${t}">${e.placeholderLetter||""}</span>`}},685023:(e,t,i)=>{"use strict";i.d(t,{DEFAULT_SIZE:()=>s,spinnerSizeMap:()=>a});const s="large",a={mini:"xsmall",xxsmall:"xxsmall",xsmall:"xsmall",small:"small",medium:"medium",large:"large"}},195317:(e,t,i)=>{"use strict";i.d(t,{MiniChartPlot:()=>h});var s=i(650151),a=i(55243),n=i(518439),r=i(501372),o=i(293659),l=i(264552);class h extends o.MiniChartPlotBase{constructor(e,t,i,s,a,n){super(e,t,i,a),this._seriesDataSource=null,this._cachedData=null,this._minBarIndex=null,
this._maxBarIndex=null,this._studyPlots=s,this._options=a,n&&this._loadCache(n)}destroy(){this._seriesDataSource?.destroy(),super.destroy()}reloadCache(e){this._cache=e,e?this._loadCache(e):(this._minBarIndex=null,this._maxBarIndex=null,this._cachedData=null,this._onData().then((()=>{this.fitContent()})))}requestData(){const e=this._getSeriesDataSource();this._status.setValue(0),this._noData.setValue(null),e.modifySeries(this.extendedSymbol(),(0,l.getServerInterval)(this.resolution()),this._miniChart.timeframe().value()),e.isStarted()||e.start()}clearSourceData(){this._seriesDataSource?.clearData(),this._studyPlots().forEach((e=>e.clearSourceData()))}moveSourceData(e){this._seriesDataSource?.moveData(e)}onTickmarksAdded(e,t){const i=this.maxBarIndex();this._isLastSessionInterval.value()&&null!==i&&i>=e&&i<=t&&(this.updateData(!1,!0),this.fitContent())}disconnect(){this._seriesDataSource?.stop()}isConnected(){return Boolean(this._seriesDataSource?.isStarted())}clearData(){if(super.clearData(),this._minBarIndex=null,this._maxBarIndex=null,null!==this._seriesDataSource&&(this._seriesDataSource.stop(),this.clearSourceData()),this._cache){const{minBarIndex:e,maxBarIndex:t,symbolInfo:i}=this._cache;this._minBarIndex=e,this._maxBarIndex=t,i&&(this._symbolInfo=i,this._initBarBuilder(i).then((()=>{this._isDestroyed.value()||this._onData().then((()=>{this.fitContent()}))})))}}seriesDataSource(){return this._getSeriesDataSource()}firstBar(){return(0,o.isTimePointIndex)(this._minBarIndex)?this._bars().search(this._minBarIndex):this._bars().first()}lastBar(){return(0,o.isTimePointIndex)(this._maxBarIndex)?this._bars().search(this._maxBarIndex,n.PlotRowSearchMode.NearestLeft):this._bars().last()}minBarIndex(){return this._minBarIndex}maxBarIndex(){return this._maxBarIndex}cacheData(){const e=this._seriesDataSource?.data()?.clone(),t=this._symbolInfo,i=this._minBarIndex,s=this._maxBarIndex;return e&&null!==t&&null!==i&&null!==s?{data:e,symbolInfo:t,minBarIndex:i,maxBarIndex:s}:null}_isMainPlot(){return!0}_dataUpdated(e,t,i){if(super._dataUpdated(e,t,i),!this._isLastSessionInterval.value()||!this._miniChart.supportRealtimeUpdates()||!i)return;const s=i.lastBarSession;0!==s&&1!==s||2!==t.lastBarSession||Promise.resolve().then((()=>{this._miniChart.setTimeframe(this._miniChart.timeframe().value(),!1,!0)}))}_onChartStyleChanged(){(0,s.assert)(0===this._studyPlots().length,"Dynamic style change is not supported if there are additional plots"),super._onChartStyleChanged()}_beforeDataReady(){super._beforeDataReady(),this._studyPlots().forEach((e=>e.deleteView()))}_getSeriesDataSource(){if(null===this._seriesDataSource){const e=this._seriesDataSource=new r.SeriesDataSource(this.chartSession(),"s"),t=e.dataEvents();t.symbolResolved().subscribe(this,this._onSymbolResolved),t.symbolNotPermitted().subscribe(this,this._onSymbolNotPermitted),t.symbolGroupNotPermitted().subscribe(this,this._onSymbolGroupNotPermitted),t.intradaySpreadNotPermitted().subscribe(this,this._onIntradaySpreadNotPermitted),
t.symbolInvalid().subscribe(this,this._onSymbolInvalid),t.symbolError().subscribe(this,this._onSymbolError),t.intradayExchangeNotPermitted().subscribe(this,this._onResolutionOrExchangeNotPermittedError),t.customIntervalNotPermitted().subscribe(this,this._onResolutionOrExchangeNotPermittedError),t.completed().subscribe(this,this._onDataCompleted),t.seriesError().subscribe(this,this._onDataError),t.seriesTimeFrame().subscribe(this,this._onTimeFrame),t.dataUpdated().subscribe(this,this._onDataInternal),t.created().subscribe(null,(()=>performance.mark("RFD",{detail:"Request first data"})),!0),t.created().subscribe(null,(()=>e.setFutureTickmarksMode("full_single_session"))),t.dataUpdated().subscribe(null,(()=>{performance.mark("FDR",{detail:"First data response"}),performance.measure("Response idle","RFD","FDR")}),!0)}return this._seriesDataSource}_bars(){return this._cachedData?this._cachedData.seriesData.bars():this._seriesDataSource?.data().bars()??new a.PlotList}_onTimeFrame(e,t){this._cachedData||(this._minBarIndex=e,this._maxBarIndex=t),this.updateData(!1),this._studyPlots().forEach((e=>e.updateData(!1,!0)))}_onDataCompleted(){this._cachedData&&(this._cachedData=null),super._onDataCompleted(),this.updateData(!1,!0),this.fitContent()}_onDataInternal(e,t,i){this._onData(t?void 0:i?.index)}async _loadCache(e){const{data:t,symbolInfo:i,minBarIndex:s,maxBarIndex:a}=e;this._minBarIndex=s,this._maxBarIndex=a,this._cachedData={symbol:this.extendedSymbol(),resolution:this.resolution(),timeFrame:this._miniChart.timeframe().value(),seriesData:t},this._symbolInfo=i;const n=await this._initBarBuilder(i);!this._isDestroyed.value()&&this._symbolInfo&&(this._symbolInfo!==i&&n.update(this._symbolInfo),await this._onData(),this._status.setValue(3),this.fitContent())}}},254688:(e,t,i)=>{"use strict";i.d(t,{LightweightMiniChart:()=>Q});var s=i(431057),a=i(998034),n=i(650151),r=i(790188),o=i(444372),l=i(338619),h=i(246255),c=i(81951),d=i(378975),u=i(432059),m=i(941285),_=i(553220),g=i(319448),p=i(69184),v=i(195317);const f=(0,s.defaultHorzScaleBehavior)();class b extends f{constructor(){super(...arguments),this._lastHash=""}shouldResetTickmarkLabels(e){const t=this.calculateItemsHash(e),i=t!==this._lastHash;return this._lastHash=t,i}calculateItemsHash(e){return e.reduce(((e,t)=>e+t.index),"")}}var y=i(942634),S=i(805578),w=i(375397),D=i(566238),x=i(72224);const C=(0,l.getLogger)("Chart.MiniChart"),T={value:"12M",type:"period-back"},k={top:.01,bottom:.01},P={chartType:"area",lineWidth:2,priceLineVisible:!1,crosshairMarkerVisible:!1,lastValueVisible:!1,scaleMargins:k},M={lineWidth:2,priceLineVisible:!1,crosshairMarkerVisible:!1,lastValueVisible:!1,scaleMargins:k},I={chartType:"baseline"},R={priceLineVisible:!1,lastValueVisible:!1,scaleMargins:k},F={priceLineVisible:!1,lastValueVisible:!1,scaleMargins:k},V={scaleMargins:k},L={scaleMargins:{top:.8,bottom:0},priceScaleId:"overlay",upColor:(0,u.applyTransparency)(r.colorsPalette["color-minty-green-500"],50),downColor:(0,u.applyTransparency)(r.colorsPalette["color-ripe-red-500"],50),
visible:!1,lastValueVisible:!1,priceLineVisible:!1},O={visible:!1,color:r.colorsPalette["color-tv-blue-500"],lineWidth:1,length:9,lastValueVisible:!1,priceLineVisible:!1},E={spinner:{visible:!1,width:4,color:r.colorsPalette["color-brand"]},fade:{visible:!1},clearDataOnSymbolChange:!0,clearDataOnTimeframeChange:!0},U={onFirstData:null,description:"",showDescription:!0,timeframe:{visible:!1,value:T.value},chartOptions:{minWidth:0,minHeight:0,chart:{grid:{horzLines:{color:"rgba(120, 123, 134, 0.1)",visible:!1},vertLines:{color:"#ffffff",visible:!1}},crosshair:{horzLine:{visible:!1,style:3,width:1,labelVisible:!1},vertLine:{visible:!1,style:3,width:1,labelVisible:!1}},layout:{fontFamily:"Trebuchet MS",fontSize:10,textColor:"#83888D",background:{type:s.ColorType.Solid,color:"transparent"}},watermark:{visible:!1,color:"#83888D",fontSize:12},rightPriceScale:{visible:!0,borderVisible:!1,entireTextOnly:!0,mode:s.PriceScaleMode.Normal},leftPriceScale:{visible:!1,borderVisible:!1,entireTextOnly:!0,mode:s.PriceScaleMode.Normal},timeScale:{borderVisible:!1,timeVisible:!0,secondsVisible:!1,lockVisibleTimeRangeOnResize:!0},handleScale:!1,handleScroll:!1},series:P,volume:L,ma:O,loading:E}},A={"1y":{value:"12M",type:"period-back"},"5y":{value:"60M",type:"period-back"},max:{value:"ALL",type:"period-back"}};function B(e,t,i,a,n,r){return!!e.dayAndTimeTickMarkFixEnabled&&(a===s.TickMarkType.Time?function(e){return e.value.endsWith("M")||e.value.endsWith("Y")||["YTD","ALL"].includes(e.value)}(t):!(!n||!r||a<=r)&&(a===s.TickMarkType.DayOfMonth&&(i.getMonth()!==n.getMonth()||i.getFullYear()!==n.getFullYear())))}const z=(()=>{let e=null,t=null,i=null;return(a,n,r,o,l,h)=>{const c={},d=new Date(1e3*o);i!==r.value&&(e=null,t=null,i=r.value);let u=!1;if(n){u=(n.suppressFn??B)(n,r,d,l,e,t)}if(e=d,t=l,u)return"";switch(l){case s.TickMarkType.Year:n?.hideYearsTickMarks?c.month="short":c.year="numeric";break;case s.TickMarkType.Month:c.month="short";break;case s.TickMarkType.DayOfMonth:c.day="numeric";break;case s.TickMarkType.Time:c.hour12="12-hours"===a,c.hour="2-digit",c.minute="2-digit";break;case s.TickMarkType.TimeWithSeconds:c.hour12="12-hours"===a,c.hour="2-digit",c.minute="2-digit",c.second="2-digit"}const m=new Date(d.getUTCFullYear(),d.getUTCMonth(),d.getUTCDate(),d.getUTCHours(),d.getUTCMinutes(),d.getUTCSeconds(),d.getUTCMilliseconds());return e=d,t=l,m.toLocaleString(h,c)}})();window.lightweightMiniChartInstances=window.lightweightMiniChartInstances||{};const N=window.lightweightMiniChartInstances;let W=0;const H={acquire:()=>(0,S.ownership)(new h.ChartSession(window.ChartApiInstance,!0))};class Q{constructor(e,t,i,n){this._isDestroyed=!1,this._studyPlots=[],this._elTimeframe=null,this._timeframeView=null,this._tickmarks=new Map,this._cachedTickmarks=new Map,this._chartSession=null,this._chartSessionConnected=null,this._connectCallback=null,this._connected=!1,this._loadErrorTimeout=null,this._isLoading=!1,this._spinner=null,this._crosshairMoveHandlers=new Map,this._atomicUpdateIsGoing=!1,this._seriesUpDownColors={},
this._isDWMResolution=!1,this._updateTimerId=null,this._width=new w.WatchedValue(0),this._height=new w.WatchedValue(0),this._status=new w.WatchedValue("loading"),this._timeScaleSizeChanged=new y.Delegate,this._onPlotStatusChanged=()=>{const e=this._mainPlot.status().value(),t=this._studyPlots.every((e=>0!==e.status().value()));switch(e){case 3:t&&this._onPlotsDataReady();break;case 2:this._onMainPlotDataError();break;case 1:this._onMainPlotSymbolResolvingError()}if(this._options.chartOptions.loading.fade.visible)switch(this._cachedTickmarks.size>0||e){case 0:this._innerContainer.classList.add(x.fade);break;case 2:case 1:case 3:case!0:this._innerContainer.classList.remove(x.fade)}this._updateStatus()},this._timeFrameOptions=i?.timeframe?.options??(0,c.getMiniTimeFrameOptions)(),this._options=(0,a.default)({},U,i),this._chartSessionProvider=n??H,this._container=t,this._innerContainer=t.ownerDocument.createElement("div"),this._innerContainer.style.width="100%",this._innerContainer.style.height="100%",this._innerContainer.style.minHeight="inherit",this._innerContainer.style.minWidth="inherit",t.appendChild(this._innerContainer),this._widget=(0,s.createChartEx)(this._innerContainer,new b,{...this._options.chartOptions?.chart,autoSize:!0}),this._timeframe=new D.WatchedObject({type:"period-back",value:this._options.timeframe.value}),this._mainPlot=this._createMainPlot(e),this.setTimeframe(this._timeframe.value(),!0);const r=this._options.cache?.loadData(this._timeframe.value().value);r?(this._cachedTickmarks=r.tickmarks,this._tickmarks=new Map(this._cachedTickmarks),this._createTooltipDateFormatter()):this.connect(),this._parentResizeObserver=new ResizeObserver((e=>{this._mainPlot.fitContent();for(const t of e)if(t.contentBoxSize){const e=t.contentBoxSize[0];this._width.setValue(e.inlineSize),this._height.setValue(e.blockSize)}})),this._parentResizeObserver.observe(t);const o=t.getBoundingClientRect();this._width.setValue(o.width),this._height.setValue(o.height),this._createLegend(),this._updateSeriesUpDownColors(),this._boundTimeScaleSizeChangedHandler=this._timeScaleSizeChangedHandler.bind(this),this._widget.timeScale().subscribeSizeChange(this._boundTimeScaleSizeChangedHandler),W+=1,this._innerContainer.dataset.lightweightMiniChartId=`${W}`,N[this._innerContainer.dataset.lightweightMiniChartId]=this}container(){return this._container}innerContainer(){return this._innerContainer}getChartContainer(){return this._container.getElementsByTagName("div").item(0)?.getElementsByTagName("table").item(0)?.getElementsByTagName("tr").item(0)?.getElementsByTagName("td").item(1)?.getElementsByTagName("div").item(0)??null}width(){return this._width.readonly()}height(){return this._height.readonly()}status(){return this._status.readonly()}seriesDataSource(){return this._mainPlot.seriesDataSource()}supportRealtimeUpdates(){return Boolean(this._options.doNotDisconnectOnDataReady)}connect(e){(0,n.assert)(!this._options.cache?.loadData(this._timeframe.value().value),"Chart can not to connect if there is an existing cache data"),
"function"==typeof e&&(this._connectCallback=e),this._clearReconnectionTimeout(),this.connected()||(this._showLoading(),this._mainPlot.clearData(),this._studyPlots.forEach((e=>e.clearData())),this._chartSession||(this._chartSession=this._chartSessionProvider.acquire(),this._chartSession.criticalError().subscribe(this,this._onChartSessionCriticalError),this._chartSessionConnected=this._chartSession.isConnected().spawn(),this._chartSessionConnected.subscribe(this._onChartSessionIsConnectedChanged.bind(this),{callWithLast:!0})),this._chartSession.connect(this._onData.bind(this)),this._chartSession.isConnected().value()&&this._requestData(),this._clearLoadErrorTimeout(),this._loadErrorTimeout=setTimeout((()=>{this.showMessage(o.t(null,void 0,i(653273))),"function"==typeof this._options.onFirstData&&(this._options.onFirstData(),this._options.onFirstData=null)}),15e3))}disconnect(){this._studyPlots.forEach((e=>e.disconnect())),this._mainPlot.disconnect(),this._chartSession?.disconnect(),this._connected=!1,this._clearLoadErrorTimeout()}connected(){return Boolean(this._connected&&this._chartSession&&this._chartSession.isConnected().value())}setTimeframe(e,t,i){const s=this._timeframe.value();let a=e;const n=A[a.value];void 0!==n&&(a=n);const r=this._timeframeIsAvailable(a)?a:T;this._options.timeframe.currentTimeframeCallback&&this._options.timeframe.currentTimeframeCallback(r.value),this._timeframe.setValue(r),this._activeRange=this._timeframe.value().value,this._timeframeView&&this._options.timeframe.visible&&this._timeframeView.update({activeRange:this._activeRange});const o=this._options.cache?.loadData(this._timeframe.value().value);if(o)return this._cachedTickmarks=o.tickmarks,this._tickmarks=new Map(this._cachedTickmarks),this._createTooltipDateFormatter(),void this._mainPlot.reloadCache(o.mainPlot);this._cachedTickmarks.size&&(this._cachedTickmarks=new Map,this._tickmarks=new Map,this._mainPlot.reloadCache(),this._mainPlot.clearData()),(!t&&s!==this._timeframe.value()||i)&&this._requestDataOnTimeframeChange()}chartSession(){return(0,n.ensureNotNull)(this._chartSession)}widget(){return this._widget}timeframe(){return this._timeframe.readonly()}setTimeFrameOptions(e,t){if(e===this._timeFrameOptions)return;const i=this.resolution();this._timeFrameOptions=e,t?this.setTimeframe(t):this.resolution()!==i&&this._requestDataOnTimeframeChange(),this._initTimeframesRenderer()}timeFrameOptions(){return this._timeFrameOptions}resolution(){const e=this._timeFrameOptions.find((e=>e.value.value===this.timeframe().value().value));return(0,n.ensureDefined)(e?.targetResolution)}changeSymbol(e,t){void 0!==t&&this._updateSeriesOptions(t),this._options.chartOptions.loading.clearDataOnSymbolChange&&(this._mainPlot.clearData(),this._mainPlot.deleteView(),this._studyPlots.forEach((e=>e.clearData())),this._studyPlots.forEach((e=>e.deleteView()))),this._mainPlot.setSymbol(e,this._options.chartOptions.series),this._mainPlot.requestData(),this._studyPlots.forEach((e=>e.requestData())),this.connect()}updateSeriesOptions(e){
this._atomicUpdateIsGoing=!0,this._updateSeriesOptions(e),this._updateSeriesUpDownColors(),this._mainPlot.updateSeriesOptions(e),this._atomicUpdateIsGoing=!1}getSeriesOptions(){return this._mainPlot.currentSeriesOptions()}updateAdditionalSeriesOptions(e,t){this._studyPlots[t].updateSeriesOptions(e)}showMessage(e){this._hideLoading(),this._mainPlot.deleteView(),this._studyPlots.forEach((e=>e.deleteView())),this._widget.applyOptions({watermark:{visible:!0,text:e}})}hideMessage(){this._widget.applyOptions({watermark:{visible:!1}})}from(){const e=this._timeFrameOptions.find((e=>e.value.value===this.timeframe().value().value));return[e?.from]}enable(e){this.connect(e)}disable(){this.disconnect()}destroy(){this._boundTimeScaleSizeChangedHandler&&(this._widget.timeScale().unsubscribeSizeChange(this._boundTimeScaleSizeChangedHandler),this._boundTimeScaleSizeChangedHandler=void 0),this._parentResizeObserver.disconnect(),this.disconnect(),this._widget.remove(),this._mainPlot.symbolResolved().unsubscribeAll(null),this._mainPlot.timeFrameInvalidated().unsubscribeAll(this),this._mainPlot.destroy(),this._studyPlots.forEach((e=>e.destroy())),this._timeframeView?.destroy(),this._chartSessionConnected?.destroy(),this._chartSession?.criticalError().unsubscribeAll(this),this._chartSession?.release(),delete N[this._innerContainer.dataset.lightweightMiniChartId],this._innerContainer.remove(),this._isDestroyed=!0}updateAvailableTimeframes(){this._mainPlot.symbolInfo()?(this._timeframeView&&this._options.timeframe.visible&&this._timeframeView.update({ranges:this._getAvailableTimeFrames()}),this.setTimeframe(this._timeframe.value())):C.logWarn("Updating available resolutions without full symbol info")}mainPlot(){return this._mainPlot}hasStudyPlots(){return this._studyPlots.length>0}studyPlots(){return this._studyPlots}addStudyPlot(e){return this._studyPlots.push(e),e.status().subscribe(this._onPlotStatusChanged),this.connected()?e.requestData():this.connect(),e.forcePercentageMode()&&this._mainPlot.switchToPercentageScaleMode(),this._updateStatus(),{noData:e.noData(),status:e.status(),remove:()=>{this._removeStudyPlot(e)},symbol:()=>e.symbol(),extendedSymbol:()=>e.extendedSymbol(),options:()=>e.currentSeriesOptions()}}indexToTime(e){const t=this._tickmarks.size?this._tickmarks:this._cachedTickmarks;return t.get(e)?.time??null}subscribeCrosshairMove(e){const t=t=>{this._atomicUpdateIsGoing||e(t)};this._crosshairMoveHandlers.set(e,t),this._widget.subscribeCrosshairMove(t)}unsubscribeCrosshairMove(e){const t=this._crosshairMoveHandlers.get(e);t&&(this._crosshairMoveHandlers.delete(e),this._widget.unsubscribeCrosshairMove(t))}upDownColors(){return this._seriesUpDownColors}dateTimeFormatter(){return this._dateTimeFormatter}isDWMResolution(){return this._isDWMResolution}updateChartRightMarginAccordingToTitles(){const e=this.mainPlot().currentSeriesOptions().horzMargins?.rightPx;if(e)this.mainPlot().updateHorzMargins({rightPx:e});else{const e=[this.mainPlot(),...this._studyPlots];let t=0
;for(const i of e)for(const e of i.titles())t=Math.max(t,e.length);this.mainPlot().updateHorzMargins({rightPx:12*t})}this.mainPlot().fitContent()}activeRange(){return this._activeRange}timeScaleSizeChanged(){return this._timeScaleSizeChanged}_getChartPlotClass(){return v.MiniChartPlot}_createMainPlot(e){const t=new(this._getChartPlotClass())(this,this._options.chartOptions.series,this._options.chartOptions.volume,(()=>this._studyPlots),this._options.mainPlotOptions,this._options.cache?.loadData(this._timeframe.value().value)?.mainPlot);return t.setSymbol(e),t.symbolResolved().subscribe(this,this._onSymbolResolved),t.timeFrameInvalidated().subscribe(this,this._onTimeFrameInvalidated),t.status().subscribe(this._onPlotStatusChanged),t}_removeStudyPlot(e){const t=this._studyPlots.indexOf(e);(0,n.assert)(-1!==t),this._studyPlots.splice(t,1),e.status().unsubscribe(this._onPlotStatusChanged),e.deleteView(),e.clearData(),e.destroy(),this._studyPlots.every((e=>!e.forcePercentageMode()))&&this._mainPlot.restoreOriginalScaleMode(),this._updateStatus()}_updateSeriesUpDownColors(){const e=this._options.chartOptions.series;switch(e.chartType){case"candlesticks":this._seriesUpDownColors.Candlestick={up:e.borderUpColor??e.upColor,down:e.borderDownColor??e.downColor};break;case"bars":this._seriesUpDownColors.Bar={up:e.upColor,down:e.downColor};break;case"histogram":this._seriesUpDownColors.Histogram={up:e.upColor||e.color,down:e.downColor||e.color}}}_updateSeriesOptions(e){this._options.chartOptions.series=function(e){let t;switch(e.chartType??"area"){case"bars":t=R;break;case"candlesticks":t=F;break;case"area":t=P;break;case"line":t=M;break;case"histogram":t=V;break;case"baseline":t=I}return(0,a.default)({},t,e)}(e)}_onPlotsDataReady(){"function"==typeof this._options.onFirstData&&(this._options.onFirstData(),this._options.onFirstData=null),this._hideLoading(),this.hideMessage(),this._clearLoadErrorTimeout(),this._options.doNotDisconnectOnDataReady||this.disconnect(),this._createReconnectionTimeout(),this._saveCache()}_saveCache(){const{cache:e}=this._options;if(!e)return;const t=this._prepareCacheData();t&&(e.saveData(this._timeframe.value().value,t),this._cachedTickmarks=t.tickmarks)}_prepareCacheData(){if(!this._tickmarks.size)return null;const e=this._mainPlot.cacheData();return e?{mainPlot:e,tickmarks:new Map(this._tickmarks)}:null}_onMainPlotDataError(){this._hideLoading(),this.showMessage(o.t(null,void 0,i(57335))),this._clearLoadErrorTimeout(),this.disconnect()}_onMainPlotSymbolResolvingError(){this._hideLoading(),this.showMessage(o.t(null,void 0,i(653273))),this._clearLoadErrorTimeout(),this.disconnect()}_createReconnectionTimeout(){if(this._options.doNotDisconnectOnDataReady)return;const e=this._options.updateTimeout;void 0!==e&&e>0&&(this._updateTimerId=setTimeout((()=>{this._updateTimerId=null,this.connected()?this._requestData():this.connect()}),e))}_clearReconnectionTimeout(){null!==this._updateTimerId&&(clearInterval(this._updateTimerId),this._updateTimerId=null)}_clearLoadErrorTimeout(){
this._loadErrorTimeout&&(clearTimeout(this._loadErrorTimeout),this._loadErrorTimeout=null)}_initTimeframesRenderer(){if(!this._options.timeframe.visible)return;{const e=this._timeFrameOptions.length<2;if(this._timeframeView?.update({hidden:e}),(this._elTimeframe??this._options.timeframe.container)?.classList.toggle(x.hidden,e),e)return}if(this._elTimeframe)return;this._options.timeframe.container?this._elTimeframe=this._options.timeframe.container:(this._elTimeframe=document.createElement("div"),this._container.appendChild(this._elTimeframe));const e=(e,t)=>{const i=this._timeFrameOptions.length<2,s=(0,n.ensureNotNull)(this._elTimeframe);s.classList.toggle(x.hidden,i),this._timeframeView=new e.TimeFrameViewRenderer(s,{name:"minichart_timeframe",activeRange:this._activeRange,ranges:this._getAvailableTimeFrames(),onSelectRange:e=>{this.setTimeframe({value:e,type:"period-back"})},size:this._options.timeframe.size,hidden:i,theme:t})};Promise.all([i.e(62564),i.e(79874),i.e(82321),i.e(31891)]).then(i.bind(i,957001)).then((t=>{(this._options.timeframe.getTheme||(()=>Promise.resolve(void 0)))().then((i=>e(t,i)))}))}_createLegend(){this._options.legend&&this._options.legend.visible&&Promise.all([i.e(13427),i.e(62584),i.e(24806),i.e(82321),i.e(42980)]).then(i.bind(i,718520)).then((e=>e.createLegend(this._options.legend.container,this._options.legend.items)))}_getAvailableTimeFrames(){const e=[];for(const t of this._timeFrameOptions)this._timeframeIsAvailable(t.value)&&e.push({value:t.value.value,text:t.text,description:t.description});return e}_timeframeIsAvailable(e){const t=this._timeFrameOptions.find((t=>t.value.value===e.value));if(!t)return!1;const i=this.mainPlot().symbolInfo();if(!i||i.pro_name!==this._mainPlot.symbol())return!0;if(i.has_intraday)return!0;return!d.Interval.parse(t.targetResolution).isIntraday()}_onChartSessionIsConnectedChanged(e){e!==this._connected&&(e?(this._connected=!0,"function"==typeof this._connectCallback&&this._connectCallback(),this._chartSession?.switchTimezone("Etc/UTC"),this._requestData()):(this._connected=!1,this._mainPlot.disconnect(),this._studyPlots.forEach((e=>e.disconnect()))))}_onChartSessionCriticalError(){this._connected=!1}_createTooltipDateFormatter(){const e=d.Interval.parse(this.resolution());let t;this._isDWMResolution=e.isDWM(),this._widget.timeScale().applyOptions({timeVisible:!this._isDWMResolution,secondsVisible:e.isSeconds()});const{dateFormat:i="dd MMM 'yy",timeHoursFormat:s="24-hours",suppressTickMarks:a}=this._options.chartOptions;t=this._isDWMResolution?new _.DateFormatter(i):new g.DateTimeFormatter({dateFormat:i,timeFormat:(0,p.getTimeFormatForInterval)(e,s)}),this._dateTimeFormatter=t,this._widget.applyOptions({localization:{timeFormatter:e=>t.format(new Date(1e3*e))},timeScale:{tickMarkFormatter:z.bind(null,s,a,this._timeframe.value())}}),this._widget.applyOptions({timeScale:{timeVisible:!d.Interval.parse(this._mainPlot.resolution()).isDWM()}})}_requestData(){this._createTooltipDateFormatter(),this._clearReconnectionTimeout(),this._mainPlot.requestData(),
this._studyPlots.forEach((e=>e.requestData()))}_onData(e){if(this._mainPlot.isConnected())switch(e.method){case"timescale_update":{const t=e.params;if(t.clear){this._tickmarks.clear(),this._mainPlot.clearSourceData();for(const e of this._studyPlots)e.clearSourceData()}if(t.index_diff.length>0){this._mainPlot.moveSourceData(t.index_diff);for(const e of this._studyPlots)e.moveSourceData(t.index_diff)}const i=t.marks;let s=1/0,a=-1/0;for(const e of i)this._tickmarks.has(e.index)||(s=Math.min(s,e.index),a=Math.max(a,e.index)),this._tickmarks.set(e.index,e);Number.isFinite(s)&&this._mainPlot.onTickmarksAdded(s,a),this._saveCache();break}}}_onSymbolResolved(){this.updateAvailableTimeframes(),this._initTimeframesRenderer()}_onTimeFrameInvalidated(){this._activeRange=void 0,this._timeframeView?.update({activeRange:void 0})}_showLoading(){if(this._isLoading)return;this.hideMessage();const e=this._options.chartOptions.loading;e.spinner.visible&&(null===this._spinner&&(this._spinner=new m.Spinner("mini").setStyle({color:e.spinner.color,width:e.spinner.width.toString(),zIndex:"10"})),this._spinner.spin(this._innerContainer)),e.fade.visible&&this._innerContainer.classList.add(x.fade),this._isLoading=!0}_hideLoading(){this._isLoading&&(this._spinner&&this._spinner.stop(),this._isLoading=!1)}_requestDataOnTimeframeChange(){this._options.chartOptions.loading.clearDataOnTimeframeChange&&(this.mainPlot().clearData(),this.mainPlot().deleteView(),this._studyPlots.forEach((e=>e.clearData())),this._studyPlots.forEach((e=>e.deleteView()))),this.connected()?this._requestData():this.connect()}_updateStatus(){const e=[this._mainPlot.status().value(),...this._studyPlots.map((e=>e.status().value()))],t=e.every((e=>0!==e))?3===e[0]?"ready":"error":"loading";this._status.setValue(t)}_timeScaleSizeChangedHandler(e,t){this._timeScaleSizeChanged.fire(e,t)}}},607436:(e,t,i)=>{"use strict";i.d(t,{DEFAULT_SIZE:()=>s.DEFAULT_SIZE,spinnerSizeMap:()=>s.spinnerSizeMap});var s=i(685023)},192784:(e,t,i)=>{"use strict";i.r(t),i.d(t,{flushDelegate:()=>s});const s=new(i(942634).Delegate)},62802:(e,t,i)=>{"use strict";e=i.nmd(e),i(638456);var s=i(702598).fetch,a=i(873428).regExpEscape,n=i(226722).TVXWindowEvents,r=i(49437).TVLocalStorage,o=i(942634).Delegate,l=i(764829),h=i(125226).isFeatureEnabled,{flushDelegate:c}=i(192784),d=i(338619).getLogger("Lib.TVSettings"),u=["s.tradingview.com","betacdn.tradingview.com"],m=(l.enabled("use_localstorage_for_settings"),window.TVSettings=function(){var e=!1,t=null,i=!1;function _(){return!(t||window.is_authenticated)}try{e=!TradingView.onWidget()&&parent&&parent!==window&&!!parent.IS_DEMO_PAGE}catch(e){}if(e){var g={"widgetbar.layout-settings":{widgets:{},settings:{minimized:!0}},notShowMainWizard:!0},p=function(e,t,i){var s=g[e];return s??t},v=function(){};return{loaded:!1,loadedModel:!1,getValue:p,getJSON:p,getBool:p,getFloat:p,getInt:p,setValue:v,setJSON:v,remove:v,keys:function(){return Object.keys(g)},keysMask:function(){return[]},sync:v,onSync:{subscribe:function(){}}}}var f=12e4;"local"===window.environment&&(f=5e3)
;var b,y,S,w=TradingView.onWidget()?"tradingview-widget":"tradingview",D=w+".",x={},C=[],T=[/^widgetbar\.widget\.watchlist.+/,/.+quicks$/,/^widgetbar\.layout-settings$/,/^ChartSideToolbarWidget\.visible$/,/^onwidget\.watchlist$/,/^chart\.favoriteDrawings$/,/^chart\.favoriteDrawingsPosition$/,/^chart\.favoriteLibraryIndicators$/,/^loadChartDialog.favorites$/,/^ChartFavoriteDrawingToolbarWidget\.visible/,/^trading\.chart\.proterty$/,/^trading_floating_toolbar\.position$/,/^trading\.orderWidgetMode\./,/^symbolWatermark$/,/^pinereference\.size$/,/^pinereference\.position$/,/^hint\.+/,/^ChartDrawingToolbarWidget\.visible/];function k(e){return D+e}function P(e){return e.substring(D.length)}function M(e,t){var i=x[e];return i??t}function I(e,t,i){i=i||{};var s=""+t;return x[e]!==s&&(x[e]=s,V(e)),i.forceFlush&&!y&&(y=setTimeout((function(){y=void 0,L()}),10)),m}function R(e,t){return t=t||{},null!=x[e]&&(delete x[e],V(e)),t.forceFlush&&L(),m}function F(){b=void 0,C.length&&L()}function V(e){if(t)null==x[e]?t.removeValue(e):t.setValue(e,x[e]);else if(_())try{null==x[e]?r.removeItem(k(e)):r.setItem(k(e),x[e])}catch(e){}else C.push(e),b||(b=setTimeout(F,f));n.emit("settings",JSON.stringify({key:e,value:x[e]}))}function L(e){if(!i&&!S)if(h("disable_save_settings"))d.logWarn("Settings flashing has been skipped because of disable_save_settings featuretoggle");else if(!l.enabled("widget")&&!_()&&0!==C.length){var t=C;C=[];for(var a={},n=t.length;n--;){var r=t[n],o=x[r];void 0===o&&(o=null),a[r]=o}var c=new FormData;c.append("delta",JSON.stringify(a)),e&&navigator.sendBeacon?navigator.sendBeacon("/savesettings/",c):s("/savesettings/",{method:"POST",credentials:"include",body:c}).then((function(i){if(i.ok||(C=C.concat(t)),[429,503].includes(i.status)){var s=1e3*+i.headers.get("retry-after")||3e5;S=setTimeout((()=>{S=void 0,L(e)}),s)}})).catch((function(){C=C.concat(t)}))}}function O(){return Object.keys(x)}function E(e){for(var t=0;t<T.length;++t)if(T[t].exec(e))return!0;return!1}function U(e){return e.substring(0,D.length)===D}function A(e){x={};const t=0===Object.keys(e).length;t||function(e){Object.keys(e).forEach((function(t){x[t]=e[t]+""}))}(e),function(e){for(var t=r.length;t--;){var i=r.key(t);i&&U(i)&&(e&&I(P(i),r.getItem(i)),r.removeItem(i))}}(t)}n.on("settings",(function(e){var t=JSON.parse(e);null==t.value?delete x[t.key]:x[t.key]=t.value}));var B=new o;return document.addEventListener("visibilitychange",(function(){"hidden"!==document.visibilityState&&!0!==document.hidden||L()})),window.addEventListener("pagehide",(function(){L(!0)})),window.addEventListener("beforeunload",(function(){L(!0)})),c.subscribe(null,(()=>{L()})),{loaded:!1,loadedModel:!1,getValue:M,getJSON:function(e,t){var i=M(e,void 0);if(null==i)return t;try{return JSON.parse(i)}catch(i){return R(e),t}},getBool:function(e,t){var i=M(e);return null==i?t:!(!i||"false"===i||0==+i)},getFloat:function(e,t,i){var s=M(e,void 0);if(null==s)return t;var a=parseFloat(s);if(!isFinite(a))throw new TypeError('"'+s+'" is not float (key: "'+e+'")');return a},
getInt:function(e,t,i){var s=M(e,void 0);if(null==s)return t;var a=parseInt(s,10);if(!isFinite(a))throw new TypeError('"'+s+'" is not int (key: "'+e+'")');return a},setValue:I,setJSON:function(e,t,i){return I(e,JSON.stringify(t),i),m},remove:R,keys:O,keysMask:function(e,t){for(var i=O(),s=[],n=(e=new RegExp("^"+a(e).replace(/\\\*\\\*/gi,".+").replace(/\\\*/gi,"[^.]+")+"$","gi"),i.length-1);n>=0;n--)e.test(i[n])&&s.push(i[n]),e.lastIndex=0;return s},sync:function(e){null!==e?(t?A(t.initialSettings||{}):_()?(function(){if(TradingView.onWidget()&&u.includes(window.location.host))for(var e="tradingview.",t=r.length;t--;){var i=r.key(t);if(0===i.indexOf(e)){var s=i.replace(e,w+".");r.setItem(s,r.getItem(i)),r.removeItem(i)}}}(),function(){x={};for(var e=!l.enabled("save_chart_properties_to_local_storage"),t=r.length;t--;){var i=r.key(t);if(i&&U(i)){var s=i.substring(D.length);e&&!E(s)||(x[s]=r.getItem(i))}}}()):A(e||{}),B.fire()):i=!0},onSync:B,setSettingsAdapter:function(e){t=e}}}());setTimeout((function(){i.e(30362).then(i.bind(i,276141)).then((e=>{e.clearOldSettings()}))}),3e4),e&&e.exports&&(e.exports=m)},17966:(e,t,i)=>{"use strict";i.d(t,{getCircleLogoAnyHtml:()=>s.getCircleLogoAnyHtml});var s=i(467236)},566238:(e,t,i)=>{"use strict";i.d(t,{WatchedObject:()=>r});var s=i(375397),a=i(124829);function n(e,t){return(0,a.deepEquals)(e,t)[0]}class r extends s.WatchedValue{constructor(e,t=n){super(e),this._comparator=t}setValue(e,t){(t||!1===this._comparator(this.value(),e))&&super.setValue(e,t)}}},411559:(e,t,i)=>{"use strict";i.d(t,{hourMinuteFormat:()=>r,hourMinuteNonZeroSecondFormat:()=>a,hourMinuteSecondFormat:()=>s,hourMinuteSecondMillisecFormat:()=>n,twelveHourMinuteFormat:()=>h,twelveHourMinuteNonZeroSecondFormat:()=>l,twelveHourMinuteSecondFormat:()=>o});const s="%h:%m:%s",a="%h:%m:%s+",n="%h:%m:%s.%ss+",r="%h:%m",o="%h:%m:%s %ampm",l="%h:%m:%s+ %ampm",h="%h:%m %ampm"},124066:(e,t,i)=>{"use strict";var s;i.d(t,{SymbolErrorPermissionDeniedReason:()=>s,invalidSymbol:()=>n,permissionDenied:()=>a}),function(e){e.Symbol="symbol",e.GroupPermission="group"}(s||(s={}));const a="permission denied",n="invalid symbol"},331613:(e,t,i)=>{"use strict";i(998418)},873428:(e,t,i)=>{"use strict";function s(e){return e.replace(/[-/\\^$*+?.()|[\]{}]/g,"\\$&")}i.d(t,{regExpEscape:()=>s})},467332:(e,t,i)=>{"use strict";i.d(t,{getTimeFrames:()=>n});var s=i(444372),a=i(855016);function n(){return{"1d":{text:s.t(null,void 0,i(207075)),value:{value:"1D",type:"period-back"},targetResolution:(0,a.stringAsResolution)("1"),description:(0,a.daysStringLiteral)(1)},"5d":{text:s.t(null,void 0,i(558628)),value:{value:"5D",type:"period-back"},targetResolution:(0,a.stringAsResolution)("5"),description:(0,a.daysStringLiteral)(5)},"1w":{text:s.t(null,void 0,i(189696)),value:{value:"7D",type:"period-back"},targetResolution:(0,a.stringAsResolution)("15"),description:(0,a.weeksStringLiteral)(1)},"1m":{text:s.t(null,void 0,i(333493)),value:{value:"1M",type:"period-back"},targetResolution:(0,a.stringAsResolution)("30"),description:(0,
a.monthsStringLiteral)(1)},"3m":{text:s.t(null,void 0,i(318717)),value:{value:"3M",type:"period-back"},targetResolution:(0,a.stringAsResolution)("60"),description:(0,a.monthsStringLiteral)(3)},"6m":{text:s.t(null,void 0,i(869411)),value:{value:"6M",type:"period-back"},targetResolution:(0,a.stringAsResolution)("120"),description:(0,a.monthsStringLiteral)(6)},"12m":{text:s.t(null,void 0,i(186322)),value:{value:"12M",type:"period-back"},targetResolution:(0,a.stringAsResolution)("1D"),description:(0,a.yearsStringLiteral)(1)},"24m":{text:s.t(null,void 0,i(745391)),value:{value:"24M",type:"period-back"},targetResolution:(0,a.stringAsResolution)("1W"),description:(0,a.yearsStringLiteral)(2)},"36m":{text:s.t(null,void 0,i(189992)),value:{value:"36M",type:"period-back"},targetResolution:(0,a.stringAsResolution)("1W"),description:(0,a.yearsStringLiteral)(3)},"60m":{text:s.t(null,void 0,i(772834)),value:{value:"60M",type:"period-back"},targetResolution:(0,a.stringAsResolution)("1W"),description:(0,a.yearsStringLiteral)(5)},"120m":{text:s.t(null,void 0,i(27969)),value:{value:"120M",type:"period-back"},targetResolution:(0,a.stringAsResolution)("1M"),description:(0,a.yearsStringLiteral)(10)},ytd:{text:s.t(null,void 0,i(168881)),value:{value:"YTD",type:"period-back"},targetResolution:(0,a.stringAsResolution)("1D"),description:s.t(null,void 0,i(251478))},all:{text:s.t(null,void 0,i(580066)),value:{value:"ALL",type:"period-back"},targetResolution:(0,a.stringAsResolution)("1M")},lastsession:{text:s.t(null,void 0,i(207075)),value:{value:"LASTSESSION",type:"period-back"},targetResolution:(0,a.stringAsResolution)("1"),description:(0,a.daysStringLiteral)(1)}}}},471771:(e,t,i)=>{"use strict";i.d(t,{getActualTimeFrame:()=>a});var s=i(467332);function a(e){const t=new Set(Object.values((0,s.getTimeFrames)()).map((e=>e.value.value)));if(t.has(e))return e;const i=e.toUpperCase();return t.has(i)?i:"12M"}}}]);